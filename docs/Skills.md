# 스킬 시스템 (Skill System) - 덱빌딩 방식

## 개요

스킬은 **10개의 슬롯**에 장착하여 덱을 구성합니다. 매 턴 덱에서 **랜덤으로 1개의 스킬이 자동 발동**됩니다. 같은 스킬을 여러 슬롯에 장착하면 해당 스킬의 발동 확률이 증가합니다.

---

## 덱 시스템 기본 규칙

### 슬롯 규칙
| 규칙 | 설명 |
|------|------|
| 총 슬롯 | 10개 (고정) |
| 중복 장착 | **허용** (같은 스킬 최대 10개) |
| 빈 슬롯 | 불가 (모든 슬롯 필수 장착) |
| 발동 방식 | 매 턴 10개 중 랜덤 1개 발동 |

### 발동 확률 계산
```
스킬 발동 확률 = (해당 스킬 장착 수 / 10) × 100%

예시: 화염구 3개, 힐 2개, 강타 5개
- 화염구: 30%
- 힐: 20%
- 강타: 50%
```

### Bag 시스템 (테트리스 주머니 방식)

스킬 발동은 **순수 랜덤이 아닌 Bag 시스템**을 사용합니다. 10개 슬롯의 스킬을 전부 1회씩 사용한 후 다시 셔플합니다. 매 사이클(10턴)마다 모든 스킬이 1회 확정 발동됩니다.

> 핵심: "뽑히냐"가 아니라 **"순서가 맞냐 + 지속시간 안에 들어오냐"**

#### 순수 랜덤 vs Bag 시스템 콤보 확률 비교

| 체인 단계 | 순수 랜덤 | Bag 시스템 | 비고 |
|-----------|----------|-----------|------|
| 2단 체인 | ~66% | ~90%+ | 거의 확정 |
| 3단 체인 | ~18% | ~50-60% | 올인 빌드로 실용적 |
| 4단 체인 | ~1.7% | ~5% | 여전히 비현실적 |

#### 결론

- **2단 체인**: Bag 보정으로 거의 보장됨
- **3단 체인**: 올인 빌드 시 절반 이상 성공 → 도전할 가치 있는 전략
- **4단 체인**: ~5%로 여전히 비현실적 → **최대 3단 체인으로 제한**

따라서 **Bag 보정 + 최대 3단 체인** 원칙을 적용합니다.
---

---

## 스킬 분류

| 타입 | 설명 | 발동 시 효과 | 권장 장착 수 |
|------|------|-------------|-------------|
| attack | 데미지 스킬 | 적에게 데미지 | 4-7개 |
| heal | 회복 스킬 | HP 회복 | 1-3개 |
| buff | 강화 스킬 | 자신 버프 | 1-3개 |
| debuff | 약화 스킬 | 적 디버프 | 1-3개 |
| ultimate | 궁극기 | 강력한 효과 + 덱 소모 | 1개 |

### 궁극기 특수 규칙
- 궁극기 발동 시 해당 **슬롯이 전투 끝까지 비활성화**
- 대신 매우 강력한 효과
- 10% 확률 (1슬롯)이지만 발동 시 결정적
- 발동 모드 지원:
  - `수동`: 궁극기 게이지가 100일 때, 전투 DM의 `🔥 궁극기 예약` 버튼으로 타이밍 지정
  - `자동`: 게이지 없이 조건 충족 시 자동 발동 (수동 대비 위력 80%)
- 내부 쿨다운:
  - 궁극기 발동 후 스킬별 쿨다운 적용
  - 쿨다운 동안 동일 궁극기 재발동 불가

---

## 스킬 등급

| 등급 | 기본 위력 | 드롭 확률 | 특징 | 해금 레벨 |
|------|----------|----------|------|----------|
| D | 1.0x | 45% | 초보자용, 효과 단순 | Lv.1 |
| C | 1.2x | 30% | 부가 효과 추가 | Lv.1 |
| B | 1.5x | 15% | 강력한 부가 효과 | Lv.1 |
| A | 1.8x | 8% | 복합 효과 | Lv.1 |
| S | 2.2x | 2% | 게임 체인저급 | Lv.1 |
| SS | 2.8x | 0.5% | 차원 급 | Lv.51 |
| SSS | 3.5x | 0.1% | 초월급 | Lv.71 |
| 신화 | 4.5x | 0.01% | 신의 힘 | Lv.91 |

---

> 액티브/패시브/연계/특수 스킬 데이터는 `data/skills.csv` 참조

---

## 스킬 숙련도 (Skill Proficiency)

### 개요

스킬을 반복 사용하면 **숙련도**가 올라 점진적으로 강화됩니다. 숙련도는 스킬 단위로 누적되며, 같은 스킬을 여러 슬롯에 장착하면 사이클당 사용 횟수가 늘어 더 빠르게 성장합니다.

> 디자인 의도: 애착 있는 스킬을 오래 쓰면 보상. 최대 숙련도 ≈ **1등급 상승** 효과.

### 숙련도 등급

| Lv | 이름 | 누적 사용 | 주 효과 보너스 | 부가 효과 보너스 | 특수 |
|----|------|----------|--------------|----------------|------|
| 1 | 미숙 | 0 | - | - | - |
| 2 | 익숙 | 30 | +4% | +3% | - |
| 3 | 숙련 | 100 | +8% | +6% | - |
| 4 | 정통 | 300 | +12% | +9% | 콤보 보너스 +10% |
| 5 | 달인 | 700 | +16% | +12% | 콤보 보너스 +20% |
| 6 | 초월 | 1500 | +20% | +15% | **키워드 초월 효과 해금** |

#### 주 효과 보너스 (스킬의 핵심 기능에 적용)

| 스킬 타입 | 적용 대상 | 예시 |
|----------|----------|------|
| attack | 데미지 | 화염구 100% → Lv.6에서 120% |
| heal | 회복량 | 응급처치 15% → Lv.6에서 18% |
| buff | 버프 수치 | 공격 강화 +20% → Lv.6에서 +24% |
| debuff | 디버프 수치 | 방어 약화 -15% → Lv.6에서 -18% |
| ultimate | 궁극기 위력 | 전부 소진 500% → Lv.6에서 600% |

#### 부가 효과 보너스 (스킬의 부가 속성에 적용, 우선순위 순)

| 우선순위 | 조건 | 적용 대상 | 예시 |
|---------|------|----------|------|
| 1 | 상태이상 확률이 있음 | 확률에 가산 | 화상 30% → Lv.6에서 45% |
| 2 | 지속시간이 있음 | Lv.3/5에서 지속 +1턴 (최대 +2턴) | 버프 3턴 → 5턴 |
| 3 | 위 둘 다 없음 | 주 효과 보너스 ×0.5 추가 가산 | 데미지 +20% → +30% (20+10) |

> 예시: 순수 데미지 스킬 "강타"(상태이상/지속 없음) → Lv.6 기준 주 효과 +20% + 부가 보너스 +10%(20×0.5) = **총 +30%**
> 예시: 힐 스킬 "응급처치"(지속 재생 3턴) → 주 효과: 회복량 +20%, 부가 효과: 지속 +2턴

### 밸런스 기준

```
숙련도 최대(+20%) = 정확히 1등급 상승

D(1.0x) 초월 → 1.2x = C급 상당
C(1.2x) 초월 → 1.44x ≈ B급 상당
B(1.5x) 초월 → 1.8x = A급 상당
A(1.8x) 초월 → 2.16x ≈ S급 상당

→ "좋은 스킬 > 익숙한 스킬" 유지하되, 갈아타는 비용 존재
→ 낮은 등급도 숙련하면 1단계 위와 경쟁 가능
→ 초월 효과 포함 시 실질 ~1.5등급 상승
→ 부가 효과 없는 스킬은 주 효과에 보너스 집중 → 단순한 스킬도 손해 없음
```

### 성장 속도

```
Bag 시스템 기준:
- 1슬롯 장착: 사이클(10턴)당 1회 사용
- 3슬롯 장착: 사이클당 3회 사용 → 성장 3배 가속

평균 전투 15턴(1.5사이클), 던전 5전투 기준:
          1슬롯    3슬롯
Lv.2      4런     1.3런
Lv.3      13런    4.4런
Lv.4      40런    13런
Lv.5      93런    31런
Lv.6      200런   67런
```

> 복수 장착이 숙련도 성장도 가속 → 초반에 스킬 1종 몰빵으로 빠르게 숙련, 이후 다양한 스킬로 확장하는 자연스러운 성장 곡선

### 초월 효과 (Lv.6 키워드별)

Lv.6 도달 시 해당 스킬의 **효과 키워드**에 따라 고유 초월 효과가 해금됩니다.

#### 공격 효과 초월

| 키워드 | 초월명 | 효과 |
|--------|--------|------|
| 잠식 | 심식 | 잠식 부여 시 스택 +1 추가, 최대 스택 +2 |
| 침수 | 범람 | 침수 범위 +1 (인접 적도 침수) |
| 둔화 | 동파 | 둔화 대상 동결 확률 +20% 추가 |
| 동결 | 영구빙결 | 동결 지속 +1턴, 해제 시 둔화 자동 부여 |
| 기절 | 뇌진탕 | 기절 해제 후 1턴 데미지 -20% 디버프 |
| 출혈 | 과다출혈 | 출혈 스택 상한 +3, 10스택 시 출혈 데미지 2배 |
| 콤보 | 무한연격 | 콤보 스택 유지시간 +2턴 |
| 파쇄 | 산산조각 | 파쇄 데미지 +25%, CC 해제 시 방어력 15% 영구 감소 |
| 중독 | 맹독 | 중독 틱 데미지 +30%, 회복 효율 -10% 추가 |
| 저주 | 깊은 저주 | 저주 효과 +20%, 저주 대상 버프 효율 -30% |
| 흡혈 | 영혼 포식 | 흡혈량 +10%, 처치 시 최대HP 5% 회복 |
| 감염 | 대역병 | 감염 전파 시 스택 100% 유지, 전파 범위 +1 |
| 화상 | 업화 | 화상 부여 시 스택 +1 추가, 화상 데미지 +15% |
| 소각 | 정화의 불꽃 | 소각 시 제거 버프당 데미지 +25% |
| 연소 | 대화재 | 연소 후 주변 적에게 화상 2스택 전파 |
| 감전 | 고압전류 | 연쇄 대상 +1, 연쇄 시 데미지 감소 없음 |
| 마비 | 완전마비 | 마비 지속 +1턴, 마비 중 받는 데미지 +15% |
| 과부하 | 핵융합 | 과부하 폭발 데미지 +30%, 폭발 범위 +1 |
| 표식 | 사냥감 | 표식 받는 데미지 +10% 추가, 치명타율 +10% |

#### 보조 효과 초월

| 키워드 | 초월명 | 효과 |
|--------|--------|------|
| 재생 | 생명의 샘 | 재생 회복량 +25%, HP 50% 이하 시 재생 2배 |
| 보호막 | 철벽 | 보호막 효율 +25%, 보호막 파괴 시 50% 재생성 |
| 환류 | 영원의 순환 | 환류 시 모든 버프 지속 +1턴 추가 |
| 축복 | 대축복 | 축복 효과 +25%, 축복 부여 시 HP 3% 회복 |
| 정화 | 완전정화 | 모든 디버프 해제, 해제당 HP 5% 회복 |
| 결계 | 절대방어 | 결계 무효화 +1회, 결계 파괴 시 정화 자동 발동 |
| 공명 | 대공명 | 공명 지속 +2턴, 공명 중 버프 효과 3배 |

### 숙련도 규칙

```
1. 숙련도는 스킬 단위로 누적 (슬롯이 아닌 스킬 ID 기준)
2. 같은 스킬 복수 장착 시 각 발동마다 +1 (3슬롯 = 사이클당 +3)
3. 숙련도는 감소하지 않음 (영구 누적)
4. 전투 중 발동만 카운트 (패시브는 전투 참여 턴당 +0.5, 반올림)
5. 초월 효과는 숙련도 보너스와 별도로 적용 (중첩)
```

### 숙련도와 기존 시스템 상호작용

```
숙련도 vs 등급:       독립. 등급은 기본 위력, 숙련도는 사용 보너스
숙련도 vs 키워드 밀도:  독립. 밀도는 덱 단위, 숙련도는 스킬 단위
숙련도 vs 콤보 체인:   Lv.4+ 콤보 보너스가 콤보 테이블의 보너스에 가산
숙련도 vs 조합 시너지:  독립. 시너지는 키워드 조건, 숙련도는 사용 횟수
```

---

## 패시브 스킬 (Passive Skills)

패시브 스킬은 **액티브 스킬과 동일하게 10개 슬롯에 장착**합니다. 별도의 패시브 슬롯은 없습니다.

### 패시브 장착 시스템

```
┌─────────────────────────────────────────────────────────────┐
│                    스킬 덱 (10 슬롯)                         │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐  │
│  │ 1  │ │ 2  │ │ 3  │ │ 4  │ │ 5  │ │ 6  │ │ 7  │ │ 8  │ │ 9  │ │ 10 │  │
│  │화염│ │화염│ │🔒 │ │🔒 │ │🔒 │ │공격│ │공격│ │힐 │ │버프│ │궁극│  │
│  │액티│ │액티│ │패시│ │패시│ │패시│ │액티│ │액티│ │액티│ │액티│ │액티│  │
│  └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘ └────┘  │
│                                                             │
│  🔒 = 패시브 (발동하지 않음, 상시 효과 적용)                   │
└─────────────────────────────────────────────────────────────┘
```

### 패시브 vs 액티브 트레이드오프

| 구성 | 장점 | 단점 |
|------|------|------|
| 패시브 多 (5개+) | 안정적인 상시 효과 | 발동 스킬 부족, 전투 길어짐 |
| 액티브 多 (8개+) | 강력한 스킬 발동 | 안정성 부족, 운 의존 |
| 균형형 (3:7) | 적당한 안정성 + 화력 | 특화 효과 부족 |

**핵심 전략**: 패시브는 슬롯을 차지하지만 발동하지 않으므로, 너무 많이 넣으면 전투에서 스킬 발동 확률이 낮아집니다. 하지만 파밍이나 탐험 패시브는 전투 외에서도 효과가 있으므로 상황에 맞게 조절해야 합니다.

### 패시브 카테고리

- **전투 패시브**: 공격/방어/속도/치명타/상태이상 관련 상시 효과
- **파밍 패시브**: 드롭률/골드/경험치 등 보상 관련 효과
- **탐험 패시브**: 함정 감지/비밀 방 발견/기습 방지 등
- **상점/NPC 패시브**: 상점 할인/강화 행운/퀘스트 보상 등
- **특수 패시브**: 고유 특수 효과 (SS~신화 등급)
- **조건부 패시브**: 특정 조건에서만 활성화

---

## 키워드 시스템 (Keyword System)

스킬의 정체성은 **키워드 조합**으로 결정됩니다. 덱빌딩의 핵심은 개별 스킬 선택이 아니라 **키워드 밀도 관리**입니다.

### 키워드 분류

스킬에 부여되는 키워드는 3가지 축으로 분류됩니다.

#### 속성 키워드

| 키워드 | 설명 |
|--------|------|
| 화염 | 화염 속성 데미지 |
| 냉기 | 냉기 속성 데미지 |
| 번개 | 번개 속성 데미지 |
| 수속성 | 수속성 데미지 / 회복 |
| 신성 | 신성 속성 데미지 / 회복 |
| 암흑 | 암흑 속성 데미지 |
| 물리 | 무속성 물리 데미지 |

#### 효과 키워드

효과 키워드는 상태이상/버프의 종류이며, **서로 다른 효과 키워드 간 연쇄(콤보)**의 기준이 됩니다.

##### 공격 효과

| 키워드 | 설명 | 속성 | → 후행 콤보 |
|--------|------|------|------------|
| 잠식 | 방어력 감소, 스택형 | 수속성 | → 동결, 감전, 침수 |
| 침수 | 물에 잠김. 번개 피해 2배, 화염 피해 반감 | 수속성 | → 감전, 동결 |
| 둔화 | 속도 감소 | 냉기 | → 동결 |
| 동결 | 행동 불가 | 냉기 | → 기절, 파쇄 |
| 기절 | 행동 불가 (1턴, 확실) | 물리 | → 출혈, 파쇄 |
| 출혈 | 틱 데미지, 스택형 | 물리 | → 중독 |
| 콤보 | 연속 타격 스택 | 물리 | → 기절 |
| 파쇄 | CC 상태(동결/기절) 분쇄. 상태 해제 + 대데미지. 냉기 체인 시 냉기 잔류 틱 데미지 + 회복 효율 감소 추가 | 물리 | - |
| 중독 | 최대HP 비례 틱 데미지, 스택형 | 암흑 | → 저주 |
| 저주 | 방어/회복 감소 | 암흑 | → 흡혈 |
| 흡혈 | 데미지의 일부 회복 | 암흑 | → 감염 |
| 감염 | 디버프 전파. 대상 사망 시 주변 적에게 확산 | 암흑 | - |
| 화상 | 틱 데미지, 스택형 | 화염 | → 소각 |
| 소각 | 적 버프 제거 (불태워 없앰) | 화염 | → 연소 |
| 연소 | 화상 스택 전소모 + 스택 비례 대폭발 | 화염 | - |
| 감전 | 피격 시 연쇄 피해 (주변 적 전이) | 번개 | → 마비 |
| 마비 | 행동 불가 (확률) | 번개 | → 과부하 |
| 과부하 | 대상을 전기 유도체화 + 축적된 전기 상태 전부 소모 + 폭발 데미지 | 번개 | - |
| 표식 | 받는 데미지 증가 | - | → (모든 공격 효과) |

##### 보조 효과

| 키워드 | 설명 | 속성 | → 후행 콤보 |
|--------|------|------|------------|
| 재생 | 턴당 HP 회복, 스택형 | 수속성 | → 보호막 |
| 보호막 | 초과 회복 흡수 | - | → 재생, 환류 |
| 환류 | 버프 지속시간 리셋 + 효과 강화 | 수속성 | → 재생 |
| 축복 | 버프 부여 | 신성 | → 정화, 공명 |
| 정화 | 디버프 해제 | 신성 | → 축복, 결계 |
| 결계 | 상태이상 1회 무효화 보호막 | 신성 | → 축복 |
| 공명 | 모든 버프 효과 일시 증폭 | - | → (모든 보조 효과) |

##### 주요 콤보 체인 요약

```
메인:    잠식 → 동결 → 기절 → 출혈 → 중독 → 저주 → 흡혈 → 감염
수속성:  잠식 → 침수 → 감전/동결 (속성 분기점)
냉기:    둔화 → 동결 → 파쇄
화염:    화상 → 소각 → 연소
번개:    감전 → 마비 → 과부하
수+번개:  침수 → 감전 (물 + 전기 = 대참사)
수+냉기:  침수 → 동결 (물 + 냉기 = 즉시 빙결)
물리:    콤보 → 기절 → 파쇄
보조:    재생 ↔ 보호막 ↔ 환류, 축복 ↔ 정화 → 결계
범용:    표식 → (모든 공격 효과), 공명 → (모든 보조 효과)
```
> 각 스킬의 키워드는 `data/skills.csv`의 키워드 컬럼 참조

---

### 키워드 밀도 시너지

덱 내 같은 키워드를 가진 스킬 수에 따라 **자동 시너지**가 발동합니다. 스킬 이름은 무관하고 키워드만 셉니다.

#### 속성 밀도 보너스

| 속성 | 3개 | 5개 | 7개 | 10개 (마스터리) |
|------|-----|-----|-----|----------------|
| 화염 | 화염 +10% | 화염 +20%, 화상+1턴 | 화염 +35%, 화상 확률 +20% | 모든 공격 화상 부여, 화상 2배 |
| 냉기 | 냉기 +10% | 냉기 +20%, 동결+10% | 냉기 +35%, 동결 확률 2배 | 모든 공격 둔화, 50% 동결 |
| 번개 | 번개 +10% | 번개 +20%, 연쇄+1 | 번개 +35%, 마비 +30% | 모든 공격 2체 연쇄, 마비+30% |
| 수속성 | 회복 +15% | 회복 +25%, 턴당 HP3% | 회복 +40%, 화염 -30% | 매 턴 HP 10%, 힐 2배 |
| 신성 | 회복 +15% | 신성 +20%, 언데드+30% | 디버프 -50%, 회복 +35% | 디버프 면역, 언데드 2배 |
| 암흑 | 흡혈 +5% | 흡혈 +15%, 저주+1턴 | 흡혈 +25%, 처치 시 HP10% | 흡혈 +40%, 킬당 공격+5% |

#### 효과 밀도 보너스

| 효과 | 3개 | 5개 |
|------|-----|-----|
| 잠식 | 잠식 스택당 방어 감소 +2% | 잠식 5스택 시 방어력 0 취급 |
| 침수 | 침수 지속 +1턴 | 침수 대상 번개 피해 3배 (2배→3배) |
| 둔화 | 둔화 지속 +1턴 | 둔화 중 회피율 0 |
| 동결 | 동결 확률 +10% | 동결 지속 +1턴 |

| 기절 | 기절 확률 +10% | 기절 해제 직후 1턴 둔화 부여 |
| 출혈 | 출혈 데미지 +15% | 출혈 스택 상한 +3 |
| 콤보 | 콤보 유지시간 +1턴 | 콤보 피니셔 데미지 +25% |
| 파쇄 | 파쇄 데미지 +20% | 파쇄 시 방어력 50% 영구 감소 |
| 중독 | 중독 데미지 +15% | 중독 스택당 회복량 -5% |
| 저주 | 저주 효과 +10% | 저주 대상 버프 지속 -1턴 |
| 흡혈 | 흡혈량 +5% | 흡혈량 +15% |
| 감염 | 감염 전파 범위 +1 | 감염 전파 시 스택 100% 유지 |
| 화상 | 화상 데미지 +15% | 화상 스택 상한 +3 |
| 소각 | 소각 시 버프 제거 +1개 | 소각된 버프당 데미지 +20% |
| 연소 | 연소 폭발 데미지 +20% | 연소 후 화상 1스택 재부여 |
| 감전 | 연쇄 전이 대상 +1 | 전이 데미지 100% (감소 없음) |
| 마비 | 마비 확률 +10% | 마비 지속 +1턴 |

| 과부하 | 과부하 폭발 범위 +1 | 소모 상태당 데미지 +30% |
| 표식 | 표식 데미지 증가량 +5% | 표식 대상 치명타율 +15% |
| 재생 | 재생량 +20% | 재생 스택 비례 받는 피해 -10% |
| 보호막 | 보호막 효율 +20% | 초과 회복 → 보호막 전환 |
| 환류 | 환류 버프 강화량 +5% | 환류 시 HP 5% 추가 회복 |
| 축복 | 축복 효과 +10% | 축복 지속 +2턴 |
| 정화 | 정화 시 해제 수 +1 | 정화 시 해제 디버프당 HP 3% 회복 |
| 결계 | 결계 무효화 횟수 +1 | 결계 파괴 시 정화 자동 발동 |
| 공명 | 공명 지속 +1턴 | 공명 중 버프 효과 3배 |

---

### 키워드 콤보 규칙

콤보는 **서로 다른 효과 키워드 간의 연쇄**로 발동합니다. 같은 키워드끼리가 아니라, 선행 상태가 후행 스킬의 조건이 됩니다.

```
콤보 조건:
1. [효과A] 키워드 스킬이 발동 → 효과A 상태 부여
2. 효과A 상태가 적/자신에게 존재
3. [효과B] 키워드 스킬이 발동 (효과A → 효과B 연쇄가 정의된 경우)
→ 콤보 보너스 발동
```

#### 공격 콤보 체인

| 선행 상태 | 후행 효과 | 연쇄 논리 | 콤보 보너스 |
|----------|----------|----------|------------|
| 잠식 | 동결 | 젖은 적은 얼기 쉬움 | 동결 확률 +50%, 동결 지속 +1턴 |
| 잠식 | 감전 | 물은 전기를 전도 | 감전 데미지 2배, 연쇄 대상 +2 |
| 잠식 | 침수 | 스며든 물이 범람 | 침수 즉시 부여, 잠식 스택 유지 |
| 침수 | 감전 | 물속에서 전류 전도 | 감전 데미지 3배, 전체 적 전이 |
| 침수 | 동결 | 범람한 물이 한꺼번에 동결 | 동결 확정, 동결 지속 +2턴 |
| 둔화 | 동결 | 느려진 적은 얼기 쉬움 | 동결 확률 +30%, 둔화 해제 |
| 동결 | 기절 | 얼음 깨뜨리기 | 동결 해제 + 400% 데미지 |
| 동결 | 파쇄 | 얼어붙은 몸을 산산조각 | 동결 해제 + 냉기 잔류 틱 데미지 + 회복 -30% + 500% 대데미지 |
| 기절 | 출혈 | 무방비 상태에서 급소 공격 | 출혈 +3스택, 기절 해제 |
| 기절 | 파쇄 | 무방비 상태를 산산조각 | 파쇄 데미지 300%, 방어력 무시 |
| 출혈 | 중독 | 열린 상처에 독 침투 | 중독 스택 = 출혈 스택, 출혈 유지 |
| 콤보 | 기절 | 연타로 기절시키기 | 콤보 5스택+ 시 기절 확률 100% |
| 중독 | 저주 | 독으로 약해진 몸에 저주 침투 | 저주 효과 2배 (방어/회복 감소량) |
| 저주 | 흡혈 | 저주받은 영혼은 흡수하기 쉬움 | 흡혈량 2배 |
| 흡혈 | 감염 | 흡수한 생명력이 역병으로 변질 | 대상 디버프 전부 주변 적 50% 전파 |
| 화상 | 소각 | 불붙은 적을 태움 | 화상 스택당 추가 버프 1개 제거 |
| 소각 | 연소 | 정화의 불이 걷잡을 수 없이 확산 | 화상 전스택 소모 + 스택당 200% 폭발 |
| 감전 | 마비 | 전류 축적 → 완전 마비 | 마비 확률 100%, 마비 지속 +1턴 |
| 마비 | 과부하 | 마비된 몸에 축적된 전기가 임계점 돌파 | 전기 유도체화 + 전기 상태 전부 소모 + 스택 합산 500% 폭발 |
| 표식 | (모든 효과) | 표식된 대상은 모든 상태에 취약 | 후행 효과 위력/확률 +50% |

#### 회복/보조 콤보 체인

| 선행 상태 | 후행 효과 | 연쇄 논리 | 콤보 보너스 |
|----------|----------|----------|------------|
| 재생 | 보호막 | 넘치는 생명력이 보호막으로 | 재생 초과분 보호막 전환 |
| 보호막 | 재생 | 보호막 아래서 안전한 재생 | 재생량 +50% |
| 보호막 | 환류 | 보호막 에너지가 순환 | 환류 효과 2배, 버프 1개 추가 리셋 |
| 환류 | 재생 | 순환 에너지가 회복력으로 전환 | 재생 스택 +2, 회복량 +30% |
| 축복 | 정화 | 축복의 힘으로 디버프 소멸 | 정화 시 해제 디버프당 HP 5% 회복 |
| 축복 | 공명 | 축복이 공명하여 모든 버프 증폭 | 모든 버프 효과 2배, 3턴 지속 |
| 정화 | 축복 | 깨끗한 상태에서 축복 극대화 | 축복 효과 +30%, 지속 +2턴 |
| 정화 | 결계 | 정화의 힘으로 보호막 생성 | 결계 무효화 +1회, 지속 +2턴 |
| 결계 | 축복 | 결계의 안정 속에서 축복 극대화 | 축복 효과 +50% |
| 공명 | (모든 보조) | 공명 에너지가 보조 효과를 강화 | 후행 보조 효과 위력/지속 +50% |

#### 콤보의 핵심 원칙

1. **키워드 간 연쇄**: 콤보는 같은 키워드가 아닌, **서로 다른 효과 키워드** 사이에서 발동
2. **자동 확장**: 새 스킬에 기존 키워드를 부여하면 즉시 해당 체인에 편입
3. **확률 기반**: 덱에서 랜덤 발동이므로, 선행+후행 키워드 밀도가 높을수록 콤보 발생 확률 증가
4. **다중 콤보**: 여러 체인이 독립적으로 동시 진행 가능 (잠식→동결 + 출혈→중독 동시)
5. **덱빌딩 핵심**: 어떤 체인을 노릴지 = 어떤 속성 조합을 덱에 넣을지

---

### 키워드 조합 시너지

복수 키워드의 조합 조건으로 발동하는 특수 시너지입니다.

| 시너지 이름 | 키워드 조건 | 효과 |
|-------------|-----------|------|
| **원소 조화** | 화염+냉기+번개+수속성 각 2개+ | 모든 속성 +15% |
| **빛과 어둠** | 신성 4개+ & 암흑 4개+ | 데미지 +25%, 흡혈 +10% |
| **글래스 캐논** | attack 타입 8개+ | 데미지 +40%, 받는 피해 +20% |
| **철벽 방어** | heal/buff 타입 7개+ | 받는 피해 -25%, 데미지 -30% |
| **버서커** | attack 5개+ & 흡혈 키워드 포함 | 공격력 +15%, HP 50% 이하 시 +30% |
| **서바이버** | heal 타입 4개+ | 받는 피해 -15%, 힐 +20% |
| **상태이상 마스터** | 서로 다른 효과 키워드 3종+ | 상태이상 확률 +15%, 지속 +1턴 |
| **궁극기 특화** | 궁극기 2개+ | 궁극기 데미지 +50% (위험도 높음) |

#### 시너지 스택 규칙

```
- 같은 종류의 시너지는 중첩되지 않음
- 다른 종류의 시너지는 모두 적용됨
- 마스터리(10개 집중)는 다른 속성 밀도 시너지와 함께 적용 불가
```

---

## 스킬 획득 방법

| 방법 | 설명 |
|------|------|
| 몬스터 드롭 | 해당 던전 몬스터가 스킬북 드롭 |
| 보스 드롭 | 보스 처치 시 고등급 스킬북 드롭 |
| 상점 구매 | 기본 스킬 구매 가능 |
| 제작 | 재료 조합으로 스킬북 제작 |
| 레이드 보상 | S등급 스킬 획득 |

---

## DB 연동

```sql
-- User_Skill_Deck 테이블 (덱 구성)
CREATE TABLE User_Skill_Deck (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id VARCHAR(50) NOT NULL,
  slot_index INT NOT NULL,  -- 0-9
  skill_id INT NOT NULL,
  FOREIGN KEY (user_id) REFERENCES UserSpec(id),
  FOREIGN KEY (skill_id) REFERENCES Skill(id),
  UNIQUE KEY (user_id, slot_index)
);

-- User_Passive_Skill 테이블 (패시브)
CREATE TABLE User_Passive_Skill (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id VARCHAR(50) NOT NULL,
  slot_index INT NOT NULL,  -- 0-3
  skill_id INT NOT NULL,
  FOREIGN KEY (user_id) REFERENCES UserSpec(id),
  FOREIGN KEY (skill_id) REFERENCES Skill(id),
  UNIQUE KEY (user_id, slot_index)
);

-- Skill 테이블
CREATE TABLE Skill (
  id INT PRIMARY KEY,
  name VARCHAR(50) NOT NULL,
  description TEXT,
  type ENUM('attack', 'heal', 'buff', 'debuff', 'ultimate', 'passive'),
  element ENUM('none', 'fire', 'ice', 'lightning', 'water', 'holy', 'dark'),
  grade_id INT,
  damage_percent INT DEFAULT 100,
  effect_json JSON,  -- 부가 효과 설정
  skill_book_item_id INT,
  FOREIGN KEY (grade_id) REFERENCES Grade(id)
);

-- User_Skill_Proficiency 테이블 (숙련도)
CREATE TABLE User_Skill_Proficiency (
  id INT PRIMARY KEY AUTO_INCREMENT,
  user_id VARCHAR(50) NOT NULL,
  skill_id INT NOT NULL,
  use_count INT DEFAULT 0,          -- 누적 사용 횟수
  proficiency_level INT DEFAULT 1,  -- 1=미숙, 2=익숙, ..., 6=초월
  FOREIGN KEY (user_id) REFERENCES UserSpec(id),
  FOREIGN KEY (skill_id) REFERENCES Skill(id),
  UNIQUE KEY (user_id, skill_id)
);

-- 스킬 데이터 예시
INSERT INTO Skill (id, name, type, element, damage_percent, effect_json) VALUES
(1001, '강타', 'attack', 'none', 100, '{}'),
(1101, '화염구', 'attack', 'fire', 100, '{"status": {"type": "burn", "chance": 30, "duration": 2}}'),
(2001, '응급 처치', 'heal', 'none', 0, '{"heal_percent": 15}');
```
